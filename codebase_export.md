# OASTH Widget Codebase Export
Timestamp: 12/08/2025 18:17:32

## File: .gradle
```kotlin
// Error reading file
```

## File: .idea\caches\deviceStreaming.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="DeviceStreaming">
    <option name="deviceSelectionList">
      <list>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="Sony" />
          <option name="codename" value="A402SO" />
          <option name="id" value="A402SO" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Sony" />
          <option name="name" value="Xperia 10" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2520" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="27" />
          <option name="brand" value="DOCOMO" />
          <option name="codename" value="F01L" />
          <option name="id" value="F01L" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="FUJITSU" />
          <option name="name" value="F-01L" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1280" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP535DL1" />
          <option name="id" value="OP535DL1" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2409" />
          <option name="screenDensity" value="401" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP5552L1" />
          <option name="id" value="OP5552L1" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2415" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP5552L1" />
          <option name="id" value="OP5552L1" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2415" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OPPO" />
          <option name="codename" value="OP573DL1" />
          <option name="id" value="OP573DL1" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="OPPO" />
          <option name="name" value="CPH2557" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="28" />
          <option name="brand" value="DOCOMO" />
          <option name="codename" value="SH-01L" />
          <option name="id" value="SH-01L" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="SHARP" />
          <option name="name" value="AQUOS sense2 SH-01L" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2160" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="Lenovo" />
          <option name="codename" value="TB330FU" />
          <option name="formFactor" value="Tablet" />
          <option name="id" value="TB330FU" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Lenovo" />
          <option name="name" value="Tab M11" />
          <option name="screenDensity" value="240" />
          <option name="screenX" value="1200" />
          <option name="screenY" value="1920" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a05s" />
          <option name="id" value="a05s" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A05s" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a06" />
          <option name="id" value="a06" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy A06" />
          <option name="screenDensity" value="300" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a14m" />
          <option name="id" value="a14m" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A145R" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2408" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a15" />
          <option name="id" value="a15" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A15" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a15x" />
          <option name="id" value="a15x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A15 5G" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a16" />
          <option name="id" value="a16" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A165M" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a16x" />
          <option name="id" value="a16x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A16 5G" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a26x" />
          <option name="id" value="a26x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A266B" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a35x" />
          <option name="id" value="a35x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A35" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a35x" />
          <option name="id" value="a35x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A35" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a36xq" />
          <option name="id" value="a36xq" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A366E" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a56x" />
          <option name="id" value="a56x" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A566E" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="akita" />
          <option name="id" value="akita" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="akita" />
          <option name="id" value="akita" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="arcfox" />
          <option name="id" value="arcfox" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="razr plus 2024" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="1272" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="motorola" />
          <option name="codename" value="austin" />
          <option name="id" value="austin" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g 5G (2022)" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="b0q" />
          <option name="id" value="b0q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S22 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3088" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="b6q" />
          <option name="id" value="b6q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Flip 6" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2640" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="blazer" />
          <option name="id" value="blazer" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2410" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="32" />
          <option name="brand" value="google" />
          <option name="codename" value="bluejay" />
          <option name="id" value="bluejay" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 6a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="caiman" />
          <option name="id" value="caiman" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="960" />
          <option name="screenY" value="2142" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="caiman" />
          <option name="id" value="caiman" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="960" />
          <option name="screenY" value="2142" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="comet" />
          <option name="default" value="true" />
          <option name="id" value="comet" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="comet" />
          <option name="default" value="true" />
          <option name="id" value="comet" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="29" />
          <option name="brand" value="samsung" />
          <option name="codename" value="crownqlteue" />
          <option name="id" value="crownqlteue" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Note9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2220" />
          <option name="screenY" value="1080" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm1q" />
          <option name="id" value="dm1q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S23" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm2q" />
          <option name="id" value="dm2q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S23 Plus" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm3q" />
          <option name="id" value="dm3q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S23 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3088" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="dubai" />
          <option name="id" value="dubai" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 30" />
          <option name="screenDensity" value="405" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e1q" />
          <option name="default" value="true" />
          <option name="id" value="e1q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e3q" />
          <option name="id" value="e3q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24 Ultra" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e3q" />
          <option name="id" value="e3q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24 Ultra" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="eos" />
          <option name="id" value="eos" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Eos" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="384" />
          <option name="screenY" value="384" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="felix" />
          <option name="id" value="felix" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="felix" />
          <option name="id" value="felix" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="felix_camera" />
          <option name="id" value="felix_camera" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold (Camera-enabled)" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="fogona" />
          <option name="id" value="fogona" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g play - 2024" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="fogos" />
          <option name="id" value="fogos" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g34 5G" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="frankel" />
          <option name="id" value="frankel" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="g0q" />
          <option name="id" value="g0q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-S906U1" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gta9pwifi" />
          <option name="id" value="gta9pwifi" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-X210" />
          <option name="screenDensity" value="240" />
          <option name="screenX" value="1200" />
          <option name="screenY" value="1920" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts7lwifi" />
          <option name="id" value="gts7lwifi" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-T870" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts7xllite" />
          <option name="id" value="gts7xllite" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-T738U" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts8uwifi" />
          <option name="formFactor" value="Tablet" />
          <option name="id" value="gts8uwifi" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S8 Ultra" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="1848" />
          <option name="screenY" value="2960" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts8wifi" />
          <option name="formFactor" value="Tablet" />
          <option name="id" value="gts8wifi" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S8" />
          <option name="screenDensity" value="274" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts9fe" />
          <option name="id" value="gts9fe" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S9 FE 5G" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="2304" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts9wifi" />
          <option name="id" value="gts9wifi" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-X710" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="husky" />
          <option name="id" value="husky" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8 Pro" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="motorola" />
          <option name="codename" value="java" />
          <option name="id" value="java" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="G20" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="motorola" />
          <option name="codename" value="kansas" />
          <option name="id" value="kansas" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g - 2025" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1604" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="komodo" />
          <option name="id" value="komodo" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro XL" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="komodo" />
          <option name="id" value="komodo" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro XL" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lamul" />
          <option name="id" value="lamul" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g05" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1604" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lion" />
          <option name="id" value="lion" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g04" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1612" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="lynx" />
          <option name="id" value="lynx" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 7a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lyriq" />
          <option name="id" value="lyriq" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 40" />
          <option name="screenDensity" value="400" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="manaus" />
          <option name="id" value="manaus" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 40 neo" />
          <option name="screenDensity" value="400" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="motorola" />
          <option name="codename" value="maui" />
          <option name="id" value="maui" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g play - 2023" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="mustang" />
          <option name="id" value="mustang" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro XL" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2404" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="o1q" />
          <option name="id" value="o1q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21" />
          <option name="screenDensity" value="421" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="31" />
          <option name="brand" value="google" />
          <option name="codename" value="oriole" />
          <option name="id" value="oriole" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 6" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa2q" />
          <option name="id" value="pa2q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S25+" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa3q" />
          <option name="id" value="pa3q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa3q" />
          <option name="id" value="pa3q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="panther" />
          <option name="id" value="panther" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 7" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="psq" />
          <option name="id" value="psq" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Edge" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="q5q" />
          <option name="id" value="q5q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Z Fold5" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1812" />
          <option name="screenY" value="2176" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="q6q" />
          <option name="id" value="q6q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Z Fold6" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1856" />
          <option name="screenY" value="2160" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="google" />
          <option name="codename" value="r11" />
          <option name="formFactor" value="Wear OS" />
          <option name="id" value="r11" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Watch" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="384" />
          <option name="screenY" value="384" />
          <option name="type" value="WEAR_OS" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="r11q" />
          <option name="id" value="r11q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-S711U" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="rango" />
          <option name="id" value="rango" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="google" />
          <option name="codename" value="redfin" />
          <option name="id" value="redfin" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 5" />
          <option name="screenDensity" value="440" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="shiba" />
          <option name="id" value="shiba" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="t2q" />
          <option name="id" value="t2q" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21 Plus" />
          <option name="screenDensity" value="394" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="tangorpro" />
          <option name="formFactor" value="Tablet" />
          <option name="id" value="tangorpro" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Tablet" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="tegu" />
          <option name="id" value="tegu" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="default" value="true" />
          <option name="id" value="tokay" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="default" value="true" />
          <option name="id" value="tokay" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="default" value="true" />
          <option name="id" value="tokay" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="xcover7" />
          <option name="id" value="xcover7" />
          <option name="labId" value="google" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-G556B" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2408" />
        </PersistentDeviceSelectionData>
      </list>
    </option>
  </component>
</project>
```

## File: .idea\AndroidProjectSystem.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AndroidProjectSystem">
    <option name="providerId" value="com.android.tools.idea.GradleProjectSystem" />
  </component>
</project>
```

## File: .idea\compiler.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CompilerConfiguration">
    <bytecodeTargetLevel target="21" />
  </component>
</project>
```

## File: .idea\deploymentTargetSelector.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="deploymentTargetSelector">
    <selectionStates>
      <SelectionState runConfigName="app">
        <option name="selectionMode" value="DROPDOWN" />
        <DropdownSelection timestamp="2025-12-08T14:35:23.207404800Z">
          <Target type="DEFAULT_BOOT">
            <handle>
              <DeviceId pluginId="PhysicalDevice" identifier="serial=f253a6be" />
            </handle>
          </Target>
        </DropdownSelection>
        <DialogSelection />
      </SelectionState>
    </selectionStates>
  </component>
</project>
```

## File: .idea\gradle.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="GradleSettings">
    <option name="linkedExternalProjectsSettings">
      <GradleProjectSettings>
        <option name="testRunner" value="CHOOSE_PER_TEST" />
        <option name="externalProjectPath" value="$PROJECT_DIR$" />
        <option name="gradleJvm" value="#GRADLE_LOCAL_JAVA_HOME" />
        <option name="modules">
          <set>
            <option value="$PROJECT_DIR$" />
            <option value="$PROJECT_DIR$/app" />
          </set>
        </option>
      </GradleProjectSettings>
    </option>
  </component>
</project>
```

## File: .idea\migrations.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ProjectMigrations">
    <option name="MigrateToGradleLocalJavaHome">
      <set>
        <option value="$PROJECT_DIR$" />
      </set>
    </option>
  </component>
</project>
```

## File: .idea\misc.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ExternalStorageConfigurationManager" enabled="true" />
  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK">
    <output url="file://$PROJECT_DIR$/build/classes" />
  </component>
  <component name="ProjectType">
    <option name="id" value="Android" />
  </component>
</project>
```

## File: .idea\runConfigurations.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="RunConfigurationProducerService">
    <option name="ignoredProducers">
      <set>
        <option value="com.intellij.execution.junit.AbstractAllInDirectoryConfigurationProducer" />
        <option value="com.intellij.execution.junit.AllInPackageConfigurationProducer" />
        <option value="com.intellij.execution.junit.PatternConfigurationProducer" />
        <option value="com.intellij.execution.junit.TestInClassConfigurationProducer" />
        <option value="com.intellij.execution.junit.UniqueIdConfigurationProducer" />
        <option value="com.intellij.execution.junit.testDiscovery.JUnitTestDiscoveryConfigurationProducer" />
        <option value="org.jetbrains.kotlin.idea.junit.KotlinJUnitRunConfigurationProducer" />
        <option value="org.jetbrains.kotlin.idea.junit.KotlinPatternConfigurationProducer" />
      </set>
    </option>
  </component>
</project>
```

## File: .idea\vcs.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="VcsDirectoryMappings">
    <mapping directory="$PROJECT_DIR$/.." vcs="Git" />
  </component>
</project>
```

## File: .idea\workspace.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AndroidLayouts">
    <shared>
      <config />
    </shared>
  </component>
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="NONE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="b2c3dd8e-5978-42b9-ba81-cb13a367ab65" name="Changes" comment="">
      <change beforePath="$PROJECT_DIR$/.gradle/9.0-milestone-1/executionHistory/executionHistory.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/9.0-milestone-1/executionHistory/executionHistory.bin" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.gradle/9.0-milestone-1/executionHistory/executionHistory.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/9.0-milestone-1/executionHistory/executionHistory.lock" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/fileHashes.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/fileHashes.bin" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/fileHashes.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/fileHashes.lock" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/resourceHashesCache.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/9.0-milestone-1/fileHashes/resourceHashesCache.bin" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/deploymentTargetSelector.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/deploymentTargetSelector.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/oasth/widget/widget/BusRemoteViewsService.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/oasth/widget/widget/BusRemoteViewsService.kt" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/app/src/main/res/layout/widget_item.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/layout/widget_item.xml" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="ClangdSettings">
    <option name="formatViaClangd" value="false" />
  </component>
  <component name="ExecutionTargetManager" SELECTED_TARGET="device_and_snapshot_combo_box_target[DeviceId(pluginId=PhysicalDevice, isTemplate=false, identifier=serial=f253a6be)]" />
  <component name="ExternalProjectsData">
    <projectState path="$PROJECT_DIR$">
      <ProjectState />
    </projectState>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$/.." />
  </component>
  <component name="GradleScriptDefinitionsStorage" workingDir="$PROJECT_DIR$" gradleHome="C:\Users\panos\.gradle\wrapper\dists\gradle-9.0-milestone-1-bin\3vdepk4s12bybhohyuvjcm1bd\gradle-9.0-milestone-1" javaHome="C:\Program Files\Android\Android Studio\jbr" gradleVersion="9.0-milestone-1" />
  <component name="ProjectColorInfo"><![CDATA[{
  "associatedIndex": 2
}]]></component>
  <component name="ProjectId" id="36WuW4WU1ERDuQfaNlULcUyxOgT" />
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "Android App.app.executor": "Run",
    "ModuleVcsDetector.initialDetectionPerformed": "true",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "RunOnceActivity.cidr.known.project.marker": "true",
    "RunOnceActivity.git.unshallow": "true",
    "RunOnceActivity.readMode.enableVisualFormatting": "true",
    "cf.first.check.clang-format": "false",
    "cidr.known.project.marker": "true",
    "git-widget-placeholder": "feature/multi-stop-filtering",
    "kotlin-language-version-configured": "true",
    "last_opened_file_path": "C:/Users/panos/Desktop/oasth widget/oasth-tracker/android"
  }
}]]></component>
  <component name="RunManager">
    <configuration name="app" type="AndroidRunConfigurationType" factoryName="Android App" activateToolWindowBeforeRun="false">
      <module name="OasthWidget.app" />
      <option name="ANDROID_RUN_CONFIGURATION_SCHEMA_VERSION" value="1" />
      <option name="DEPLOY" value="true" />
      <option name="DEPLOY_APK_FROM_BUNDLE" value="false" />
      <option name="DEPLOY_AS_INSTANT" value="false" />
      <option name="ARTIFACT_NAME" value="" />
      <option name="PM_INSTALL_OPTIONS" value="" />
      <option name="ALL_USERS" value="false" />
      <option name="ALWAYS_INSTALL_WITH_PM" value="false" />
      <option name="ALLOW_ASSUME_VERIFIED" value="false" />
      <option name="CLEAR_APP_STORAGE" value="false" />
      <option name="DYNAMIC_FEATURES_DISABLED_LIST" value="" />
      <option name="ACTIVITY_EXTRA_FLAGS" value="" />
      <option name="MODE" value="default_activity" />
      <option name="RESTORE_ENABLED" value="false" />
      <option name="RESTORE_FILE" value="" />
      <option name="RESTORE_FRESH_INSTALL_ONLY" value="false" />
      <option name="CLEAR_LOGCAT" value="false" />
      <option name="SHOW_LOGCAT_AUTOMATICALLY" value="false" />
      <option name="TARGET_SELECTION_MODE" value="DEVICE_AND_SNAPSHOT_COMBO_BOX" />
      <option name="SELECTED_CLOUD_MATRIX_CONFIGURATION_ID" value="-1" />
      <option name="SELECTED_CLOUD_MATRIX_PROJECT_ID" value="" />
      <option name="DEBUGGER_TYPE" value="Auto" />
      <Auto>
        <option name="USE_JAVA_AWARE_DEBUGGER" value="false" />
        <option name="SHOW_STATIC_VARS" value="true" />
        <option name="WORKING_DIR" value="" />
        <option name="TARGET_LOGGING_CHANNELS" value="lldb process:gdb-remote packets" />
        <option name="SHOW_OPTIMIZED_WARNING" value="true" />
        <option name="ATTACH_ON_WAIT_FOR_DEBUGGER" value="false" />
        <option name="DEBUG_SANDBOX_SDK" value="false" />
      </Auto>
      <Hybrid>
        <option name="USE_JAVA_AWARE_DEBUGGER" value="false" />
        <option name="SHOW_STATIC_VARS" value="true" />
        <option name="WORKING_DIR" value="" />
        <option name="TARGET_LOGGING_CHANNELS" value="lldb process:gdb-remote packets" />
        <option name="SHOW_OPTIMIZED_WARNING" value="true" />
        <option name="ATTACH_ON_WAIT_FOR_DEBUGGER" value="false" />
        <option name="DEBUG_SANDBOX_SDK" value="false" />
      </Hybrid>
      <Java>
        <option name="ATTACH_ON_WAIT_FOR_DEBUGGER" value="false" />
        <option name="DEBUG_SANDBOX_SDK" value="false" />
      </Java>
      <Native>
        <option name="USE_JAVA_AWARE_DEBUGGER" value="false" />
        <option name="SHOW_STATIC_VARS" value="true" />
        <option name="WORKING_DIR" value="" />
        <option name="TARGET_LOGGING_CHANNELS" value="lldb process:gdb-remote packets" />
        <option name="SHOW_OPTIMIZED_WARNING" value="true" />
        <option name="ATTACH_ON_WAIT_FOR_DEBUGGER" value="false" />
        <option name="DEBUG_SANDBOX_SDK" value="false" />
      </Native>
      <Profilers>
        <option name="ADVANCED_PROFILING_ENABLED" value="false" />
        <option name="STARTUP_PROFILING_ENABLED" value="false" />
        <option name="STARTUP_CPU_PROFILING_ENABLED" value="false" />
        <option name="STARTUP_CPU_PROFILING_CONFIGURATION_NAME" value="Java/Kotlin Method Sample (legacy)" />
        <option name="STARTUP_NATIVE_MEMORY_PROFILING_ENABLED" value="false" />
        <option name="NATIVE_MEMORY_SAMPLE_RATE_BYTES" value="2048" />
      </Profilers>
      <option name="DEEP_LINK" value="" />
      <option name="ACTIVITY" value="" />
      <option name="ACTIVITY_CLASS" value="" />
      <option name="SEARCH_ACTIVITY_IN_GLOBAL_SCOPE" value="false" />
      <option name="SKIP_ACTIVITY_VALIDATION" value="false" />
      <method v="2">
        <option name="Android.Gradle.BeforeRunTask" enabled="true" />
      </method>
    </configuration>
  </component>
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="b2c3dd8e-5978-42b9-ba81-cb13a367ab65" name="Changes" comment="" />
      <created>1765134676853</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1765134676853</updated>
    </task>
    <servers />
  </component>
</project>
```

## File: app\src\main\java\com\oasth\widget\data\Models.kt
```kt
package com.oasth.widget.data

import com.google.gson.annotations.SerializedName

/**
 * Bus arrival data from OASTH API
 * API response: {"btime2":"5","route_code":"39","veh_code":"2740"}
 */
data class BusArrival(
    @SerializedName("bline_id")
    val lineId: String = "",
    
    @SerializedName("bline_descr")
    val lineDescr: String = "",
    
    @SerializedName("route_code")
    val routeCode: String = "",
    
    @SerializedName("veh_code")
    val vehicleCode: String = "",
    
    // btime2 comes as String from API, need custom handling
    @SerializedName("btime2")
    val rawTime: String = "0"
) {
    /** Estimated minutes as Int, parsed from rawTime string */
    val estimatedMinutes: Int
        get() = rawTime.toIntOrNull() ?: 0
    
    /** Display name - prefer lineId if available, otherwise routeCode */
    val displayLine: String
        get() = lineId.ifEmpty { routeCode }
}

/**
 * Bus line information
 */
data class BusLine(
    @SerializedName("LineCode")
    val lineCode: String = "",
    
    @SerializedName("LineID")
    val lineId: String = "",
    
    @SerializedName("LineDescr")
    val lineDescr: String = ""
)

/**
 * Session credentials for API access
 */
data class SessionData(
    val phpSessionId: String,
    val token: String,
    val createdAt: Long
) {
    fun isValid(): Boolean {
        val oneHourMs = 60 * 60 * 1000L
        return System.currentTimeMillis() - createdAt < oneHourMs
    }
}

/**
 * Widget configuration stored per widget instance
 */
data class WidgetConfig(
    val widgetId: Int,
    val stopCode: String, // Comma-separated API IDs
    val stopName: String,
    val lineFilters: String = "" // Whitelist: "STREET_ID:LINE1,LINE2;..."
)

```

## File: app\src\main\java\com\oasth\widget\data\OasthApi.kt
```kt
package com.oasth.widget.data

import android.util.Log
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import okhttp3.MediaType.Companion.toMediaType
import okhttp3.OkHttpClient
import okhttp3.Request
import okhttp3.RequestBody.Companion.toRequestBody
import java.util.concurrent.TimeUnit

/**
 * OASTH API client using POST requests with session auto-refresh
 */
class OasthApi(private val sessionManager: SessionManager) {
    
    companion object {
        private const val TAG = "OasthApi"
        private const val BASE_URL = "https://telematics.oasth.gr"
        private const val API_URL = "$BASE_URL/api/"
        private const val GITHUB_API = "https://api.github.com/repos/rlutolli/oasth-tracker/releases/latest"
    }
    
    private val client = OkHttpClient.Builder()
        .connectTimeout(15, TimeUnit.SECONDS)
        .readTimeout(15, TimeUnit.SECONDS)
        .build()
    
    private val gson = Gson()
    
    // Prevent infinite recursion on 401
    @Volatile
    private var isRetrying = false
    
    /**
     * Get arrivals for a specific stop using POST
     */
    suspend fun getArrivals(stopCode: String): List<BusArrival> = withContext(Dispatchers.IO) {
        Log.d(TAG, "Getting arrivals for stop: $stopCode")
        
        try {
            val session = sessionManager.getSession()
            
            val request = Request.Builder()
                .url("${API_URL}?act=getStopArrivals&p1=$stopCode")
                .post("".toRequestBody("application/x-www-form-urlencoded".toMediaType()))
                .addHeader("User-Agent", "Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36")
                .addHeader("Accept", "application/json, text/javascript, */*; q=0.01")
                .addHeader("X-Requested-With", "XMLHttpRequest")
                .addHeader("X-CSRF-Token", session.token)
                .addHeader("Cookie", "PHPSESSID=${session.phpSessionId}")
                .addHeader("Origin", BASE_URL)
                .addHeader("Referer", "$BASE_URL/")
                .build()
            
            val response = client.newCall(request).execute()
            val code = response.code
            val body = response.body?.string() ?: "[]"
            response.close()
            
            Log.d(TAG, "Response code: $code, body length: ${body.length}")
            
            // Check for 401 or unauthorized response
            if (code == 401 || body.contains("unauthorized", ignoreCase = true) || body.contains("not authorized", ignoreCase = true)) {
                if (!isRetrying) {
                    Log.w(TAG, "Unauthorized - refreshing session and retrying...")
                    isRetrying = true
                    sessionManager.refreshSession()
                    val result = getArrivals(stopCode)
                    isRetrying = false
                    return@withContext result
                } else {
                    Log.e(TAG, "Still unauthorized after refresh, giving up")
                    isRetrying = false
                    return@withContext emptyList()
                }
            }
            
            try {
                val type = object : TypeToken<List<BusArrival>>() {}.type
                val arrivals = gson.fromJson<List<BusArrival>>(body, type) ?: emptyList()
                Log.d(TAG, "Parsed ${arrivals.size} arrivals")
                arrivals
            } catch (e: Exception) {
                Log.e(TAG, "Parse error: ${e.message}")
                emptyList()
            }
        } catch (e: Exception) {
            Log.e(TAG, "Network error: ${e.message}")
            emptyList()
        }
    }
    
    /**
     * Get stop info by code - returns stop name if available
     */
    suspend fun getStopInfo(stopCode: String): String? = withContext(Dispatchers.IO) {
        try {
            val session = sessionManager.getSession()
            
            val request = Request.Builder()
                .url("${API_URL}?act=getStopArrivals&p1=$stopCode")
                .post("".toRequestBody("application/x-www-form-urlencoded".toMediaType()))
                .addHeader("User-Agent", "Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36")
                .addHeader("Accept", "application/json")
                .addHeader("X-Requested-With", "XMLHttpRequest")
                .addHeader("X-CSRF-Token", session.token)
                .addHeader("Cookie", "PHPSESSID=${session.phpSessionId}")
                .build()
            
            val response = client.newCall(request).execute()
            val body = response.body?.string() ?: return@withContext null
            response.close()
            
            // Try to extract stop description from arrivals response
            val regex = """"bstop_descr"\s*:\s*"([^"]+)"""".toRegex()
            regex.find(body)?.groupValues?.get(1)
        } catch (e: Exception) {
            Log.e(TAG, "Error getting stop info: ${e.message}")
            null
        }
    }
    
    /**
     * Check for app updates from GitHub releases
     */
    suspend fun checkForUpdate(currentVersion: String): String? = withContext(Dispatchers.IO) {
        try {
            val request = Request.Builder()
                .url(GITHUB_API)
                .addHeader("Accept", "application/vnd.github.v3+json")
                .get()
                .build()
            
            val response = client.newCall(request).execute()
            val body = response.body?.string() ?: return@withContext null
            response.close()
            
            val regex = """"tag_name"\s*:\s*"v?([^"]+)"""".toRegex()
            val latestVersion = regex.find(body)?.groupValues?.get(1) ?: return@withContext null
            
            if (isNewerVersion(latestVersion, currentVersion)) {
                latestVersion
            } else {
                null
            }
        } catch (e: Exception) {
            Log.e(TAG, "Error checking for updates: ${e.message}")
            null
        }
    }
    
    private fun isNewerVersion(latest: String, current: String): Boolean {
        val latestParts = latest.split(".").mapNotNull { it.toIntOrNull() }
        val currentParts = current.split(".").mapNotNull { it.toIntOrNull() }
        
        for (i in 0 until maxOf(latestParts.size, currentParts.size)) {
            val l = latestParts.getOrElse(i) { 0 }
            val c = currentParts.getOrElse(i) { 0 }
            if (l > c) return true
            if (l < c) return false
        }
        return false
    }
}

```

## File: app\src\main\java\com\oasth\widget\data\SessionManager.kt
```kt
package com.oasth.widget.data

import android.annotation.SuppressLint
import android.content.Context
import android.content.SharedPreferences
import android.os.Handler
import android.os.Looper
import android.webkit.CookieManager
import android.webkit.WebView
import android.webkit.WebViewClient
import kotlinx.coroutines.suspendCancellableCoroutine
import kotlinx.coroutines.withTimeoutOrNull
import kotlin.coroutines.resume

/**
 * Manages OASTH session via WebView for initial auth, then caches credentials.
 */
class SessionManager(private val context: Context) {
    
    companion object {
        private const val PREFS_NAME = "oasth_session"
        private const val KEY_PHP_SESSION_ID = "php_session_id"
        private const val KEY_TOKEN = "token"
        private const val KEY_CREATED_AT = "created_at"
        
        // Static token discovered through reverse-engineering
        private const val STATIC_TOKEN = "e2287129f7a2bbae422f3673c4944d703b84a1cf71e189f869de7da527d01137"
        
        private const val OASTH_URL = "https://telematics.oasth.gr/en/"
        private const val SESSION_TIMEOUT_MS = 30000L // Increased to 30 seconds
    }
    
    private val prefs: SharedPreferences by lazy {
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
    }
    
    private val mainHandler = Handler(Looper.getMainLooper())
    
    /**
     * Get valid session, refreshing if needed
     */
    suspend fun getSession(): SessionData {
        val cached = getCachedSession()
        if (cached != null && cached.isValid()) {
            return cached
        }
        
        return refreshSession() ?: throw Exception("Failed to get session")
    }
    
    /**
     * Get cached session if exists
     */
    private fun getCachedSession(): SessionData? {
        val phpSessionId = prefs.getString(KEY_PHP_SESSION_ID, null) ?: return null
        val token = prefs.getString(KEY_TOKEN, null) ?: return null
        val createdAt = prefs.getLong(KEY_CREATED_AT, 0)
        
        return SessionData(phpSessionId, token, createdAt)
    }
    
    /**
     * Save session to SharedPreferences
     */
    private fun saveSession(session: SessionData) {
        prefs.edit()
            .putString(KEY_PHP_SESSION_ID, session.phpSessionId)
            .putString(KEY_TOKEN, session.token)
            .putLong(KEY_CREATED_AT, session.createdAt)
            .apply()
    }
    
    /**
     * Refresh session using WebView on main thread
     */
    @SuppressLint("SetJavaScriptEnabled")
    suspend fun refreshSession(): SessionData? = withTimeoutOrNull(SESSION_TIMEOUT_MS) {
        suspendCancellableCoroutine { continuation ->
            mainHandler.post {
                try {
                    val webView = WebView(context)
                    
                    webView.settings.apply {
                        javaScriptEnabled = true
                        domStorageEnabled = true
                        userAgentString = "Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36 Chrome/120.0.0.0 Mobile"
                    }
                    
                    webView.webViewClient = object : WebViewClient() {
                        override fun onPageFinished(view: WebView?, url: String?) {
                            super.onPageFinished(view, url)
                            
                            // Wait for JavaScript to execute
                            mainHandler.postDelayed({
                                extractCredentials(view ?: webView) { session ->
                                    webView.destroy()
                                    if (session != null) {
                                        saveSession(session)
                                    }
                                    if (continuation.isActive) {
                                        continuation.resume(session)
                                    }
                                }
                            }, 3000) // Wait 3 seconds for JS to set cookies
                        }
                        
                        override fun onReceivedError(
                            view: WebView?,
                            errorCode: Int,
                            description: String?,
                            failingUrl: String?
                        ) {
                            super.onReceivedError(view, errorCode, description, failingUrl)
                            webView.destroy()
                            if (continuation.isActive) {
                                continuation.resume(null)
                            }
                        }
                    }
                    
                    // Clear existing cookies and load page
                    CookieManager.getInstance().removeAllCookies(null)
                    webView.loadUrl(OASTH_URL)
                    
                    continuation.invokeOnCancellation {
                        mainHandler.post { webView.destroy() }
                    }
                } catch (e: Exception) {
                    if (continuation.isActive) {
                        continuation.resume(null)
                    }
                }
            }
        }
    }
    
    /**
     * Extract token and PHPSESSID from WebView
     */
    private fun extractCredentials(webView: WebView, callback: (SessionData?) -> Unit) {
        // Extract JavaScript token
        webView.evaluateJavascript("window.token || '$STATIC_TOKEN'") { tokenResult ->
            val token = tokenResult?.trim('"') ?: STATIC_TOKEN
            
            // Get PHPSESSID from cookies
            val cookies = CookieManager.getInstance().getCookie(OASTH_URL)
            val phpSessionId = extractPhpSessionId(cookies)
            
            if (phpSessionId != null && token.isNotEmpty()) {
                callback(SessionData(
                    phpSessionId = phpSessionId,
                    token = token,
                    createdAt = System.currentTimeMillis()
                ))
            } else {
                // Fallback: use static token if we got cookies at least
                if (phpSessionId != null) {
                    callback(SessionData(
                        phpSessionId = phpSessionId,
                        token = STATIC_TOKEN,
                        createdAt = System.currentTimeMillis()
                    ))
                } else {
                    callback(null)
                }
            }
        }
    }
    
    /**
     * Parse PHPSESSID from cookie string
     */
    private fun extractPhpSessionId(cookies: String?): String? {
        if (cookies.isNullOrEmpty()) return null
        
        return cookies.split(";")
            .map { it.trim() }
            .find { it.startsWith("PHPSESSID=") }
            ?.substringAfter("PHPSESSID=")
    }
    
    /**
     * Clear cached session
     */
    fun clearSession() {
        prefs.edit().clear().apply()
    }
}

```

## File: app\src\main\java\com\oasth\widget\data\StopRepository.kt
```kt
package com.oasth.widget.data

import android.content.Context
import android.util.Log
import org.json.JSONArray
import org.json.JSONObject
import java.io.BufferedReader
import java.io.InputStreamReader

/**
 * Repository for resolving Street IDs (visible on signs) to API IDs (for getStopArrivals).
 * Also provides stop names for display.
 * 
 * stops.json structure:
 * {
 *   "1403": {
 *     "StreetID": "1403",
 *     "StopDescr": "",
 *     "API_IDs": ["1306"]
 *   },
 *   ...
 * }
 */
class StopRepository(private val context: Context) {

    // Map: Street ID -> API ID
    private var apiIdMap: Map<String, String>? = null
    
    // Map: Street ID -> Stop Description
    private var stopNameMap: Map<String, String>? = null

    /**
     * Resolves a Street ID to an API ID for getStopArrivals.
     */
    fun getApiId(streetId: String): String {
        ensureLoaded()
        
        val apiId = apiIdMap?.get(streetId)
        if (apiId != null) {
            Log.d(TAG, "Mapped StreetID $streetId -> API ID $apiId")
            return apiId
        }
        
        Log.d(TAG, "No mapping for $streetId, assuming it's already an API ID")
        return streetId
    }
    
    /**
     * Gets the stop name/description for a Street ID.
     */
    fun getStopName(streetId: String): String? {
        ensureLoaded()
        return stopNameMap?.get(streetId)
    }

    private fun ensureLoaded() {
        if (apiIdMap != null) return
        
        Log.d(TAG, "Loading stops.json...")
        val apiMap = mutableMapOf<String, String>()
        val nameMap = mutableMapOf<String, String>()
        
        try {
            val assetManager = context.assets
            val inputStream = assetManager.open("stops.json")
            val reader = BufferedReader(InputStreamReader(inputStream))
            val jsonString = reader.use { it.readText() }
            
            val jsonObject = JSONObject(jsonString)
            val keys = jsonObject.keys()
            
            while (keys.hasNext()) {
                val streetId = keys.next()
                val stopObject = jsonObject.getJSONObject(streetId)
                
                // Get the first API_ID from the array
                val apiIdsArray: JSONArray? = stopObject.optJSONArray("API_IDs")
                if (apiIdsArray != null && apiIdsArray.length() > 0) {
                    apiMap[streetId] = apiIdsArray.getString(0)
                }
                
                // Get stop description
                val stopDescr = stopObject.optString("StopDescr", "")
                if (stopDescr.isNotEmpty()) {
                    nameMap[streetId] = stopDescr
                }
            }
            
            apiIdMap = apiMap
            stopNameMap = nameMap
            Log.d(TAG, "Loaded ${apiMap.size} stops, ${nameMap.size} names")
            
        } catch (e: Exception) {
            Log.e(TAG, "Error loading stops.json: ${e.message}")
            apiIdMap = emptyMap()
            stopNameMap = emptyMap()
        }
    }
    
    companion object {
        private const val TAG = "StopRepository"
    }
}

```

## File: app\src\main\java\com\oasth\widget\data\WidgetConfigRepository.kt
```kt
package com.oasth.widget.data

import android.content.Context
import android.content.SharedPreferences
import com.google.gson.Gson

/**
 * Stores widget configurations (stop code, name) per widget instance
 */
class WidgetConfigRepository(context: Context) {
    
    companion object {
        private const val PREFS_NAME = "widget_configs"
        private const val KEY_PREFIX = "widget_"
    }
    
    private val prefs: SharedPreferences = 
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
    
    private val gson = Gson()
    
    /**
     * Save configuration for a widget
     */
    fun saveConfig(config: WidgetConfig) {
        prefs.edit()
            .putString("${KEY_PREFIX}${config.widgetId}", gson.toJson(config))
            .apply()
    }
    
    /**
     * Get configuration for a widget
     */
    fun getConfig(widgetId: Int): WidgetConfig? {
        val json = prefs.getString("${KEY_PREFIX}$widgetId", null) ?: return null
        return try {
            gson.fromJson(json, WidgetConfig::class.java)
        } catch (e: Exception) {
            null
        }
    }
    
    /**
     * Delete configuration for a widget
     */
    fun deleteConfig(widgetId: Int) {
        prefs.edit()
            .remove("${KEY_PREFIX}$widgetId")
            .apply()
    }
    
    /**
     * Get all configured widget IDs
     */
    fun getAllWidgetIds(): List<Int> {
        return prefs.all.keys
            .filter { it.startsWith(KEY_PREFIX) }
            .mapNotNull { it.removePrefix(KEY_PREFIX).toIntOrNull() }
    }
}

```

## File: app\src\main\java\com\oasth\widget\logic\FilterLogic.kt
```kt
package com.oasth.widget.logic

import com.oasth.widget.data.BusArrival

object FilterLogic {

    /**
     * Parses the raw filter string into a map of StreetID -> Set of Allowed Lines.
     * Format: "1306:57,01N; 1234:10"
     */
    fun parseFilters(filterString: String): Map<String, Set<String>> {
        val filterMap = mutableMapOf<String, Set<String>>()
        if (filterString.isBlank()) return filterMap

        val rules = filterString.split(";")
        for (rule in rules) {
            if (rule.contains(":")) {
                val parts = rule.split(":")
                if (parts.size == 2) {
                    val sId = parts[0].trim()
                    // If multiple lines, split by comma
                    val lines = parts[1].split(",").map { it.trim() }.filter { it.isNotEmpty() }.toSet()
                    if (sId.isNotEmpty() && lines.isNotEmpty()) {
                        filterMap[sId] = lines
                    }
                }
            }
        }
        return filterMap
    }

    /**
     * Applies the filter to a list of arrivals for a specific stop.
     * If the stop is not in the filter map, ALL arrivals are returned (allow-all default).
     * If the stop IS in the map, ONLY lines in the set are returned.
     */
    fun filterArrivals(streetId: String, arrivals: List<BusArrival>, filterMap: Map<String, Set<String>>): List<BusArrival> {
        if (!filterMap.containsKey(streetId)) {
            // No rule for this stop -> Show all
            return arrivals
        }

        val allowedLines = filterMap[streetId] ?: emptySet()
        // Rule exists but is empty? (Shouldn't happen with parsing logic, but strict check: if rule exists, strict whitelist)
        
        return arrivals.filter { arrival ->
            // Check lineId (e.g. "01N") or routeCode if lineId missing. 
            // The service used 'displayLine' property.
            val idToCheck = arrival.displayLine
            idToCheck in allowedLines
        }
    }
}

```

## File: app\src\main\java\com\oasth\widget\ui\MainActivity.kt
```kt
package com.oasth.widget.ui

import android.content.Intent
import android.net.Uri
import android.os.Bundle
import android.widget.Button
import android.widget.TextView
import android.view.View
import androidx.appcompat.app.AppCompatActivity
import com.oasth.widget.R
import com.oasth.widget.data.SessionManager
import com.oasth.widget.data.WidgetConfigRepository
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import java.net.URL

/**
 * Main app activity showing info, widgets, version, and credits
 */
class MainActivity : AppCompatActivity() {
    
    companion object {
        private const val CURRENT_VERSION = "2.3.0"
        private const val GITHUB_API = "https://api.github.com/repos/rlutolli/oasth-tracker/releases/latest"
        private const val GITHUB_RELEASES = "https://github.com/rlutolli/oasth-tracker/releases"
    }
    
    private lateinit var statusText: TextView
    private lateinit var widgetsText: TextView
    private lateinit var versionText: TextView
    private lateinit var updateButton: Button
    private lateinit var creditsText: TextView
    private lateinit var configRepo: WidgetConfigRepository
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        statusText = findViewById(R.id.status_text)
        widgetsText = findViewById(R.id.widgets_text)
        versionText = findViewById(R.id.update_text)
        updateButton = findViewById(R.id.update_button)
        creditsText = findViewById(R.id.credits_text)
        configRepo = WidgetConfigRepository(this)
        
        updateButton.visibility = View.GONE
        updateButton.setOnClickListener { openGithubReleases() }
        
        // Set credits text
        creditsText.text = getString(R.string.credits)
    }
    
    override fun onResume() {
        super.onResume()
        loadStatus()
    }
    
    private fun loadStatus() {
        refreshWidgetList()
        checkSession()
        checkForUpdates()
    }
    
    private fun refreshWidgetList() {
        val widgetIds = configRepo.getAllWidgetIds()
        
        widgetsText.text = if (widgetIds.isEmpty()) {
            getString(R.string.no_widgets_configured)
        } else {
            buildString {
                appendLine(getString(R.string.configured_widgets, widgetIds.size))
                appendLine()
                for (id in widgetIds) {
                    val config = configRepo.getConfig(id)
                    if (config != null) {
                        appendLine(" ${config.stopName} (${config.stopCode})")
                    }
                }
            }
        }
    }
    
    private fun checkSession() {
        statusText.text = getString(R.string.checking_session)
        
        CoroutineScope(Dispatchers.Main).launch {
            try {
                val sessionManager = SessionManager(this@MainActivity)
                val session = sessionManager.getSession()
                
                if (session.isValid()) {
                    statusText.text = getString(R.string.session_active)
                } else {
                    statusText.text = "Session expired, refreshing..."
                }
            } catch (e: Exception) {
                statusText.text = getString(R.string.session_error, e.message ?: "Unknown error")
            }
        }
    }
    
    private fun checkForUpdates() {
        versionText.text = getString(R.string.version_checking)
        
        CoroutineScope(Dispatchers.IO).launch {
            try {
                val latestVersion = fetchLatestVersion()
                
                CoroutineScope(Dispatchers.Main).launch {
                    if (latestVersion != null && isNewerVersion(latestVersion, CURRENT_VERSION)) {
                        versionText.text = getString(R.string.version_update_available, latestVersion)
                        updateButton.visibility = View.VISIBLE
                    } else {
                        versionText.text = "${getString(R.string.version_up_to_date)} (v$CURRENT_VERSION)"
                        updateButton.visibility = View.GONE
                    }
                }
            } catch (e: Exception) {
                CoroutineScope(Dispatchers.Main).launch {
                    versionText.text = "v$CURRENT_VERSION"
                    updateButton.visibility = View.GONE
                }
            }
        }
    }
    
    private fun fetchLatestVersion(): String? {
        return try {
            val url = URL(GITHUB_API)
            val connection = url.openConnection()
            connection.setRequestProperty("Accept", "application/vnd.github.v3+json")
            connection.connectTimeout = 5000
            connection.readTimeout = 5000
            
            val response = connection.getInputStream().bufferedReader().readText()
            val regex = """"tag_name"\s*:\s*"v?([^"]+)"""".toRegex()
            regex.find(response)?.groupValues?.get(1)
        } catch (e: Exception) {
            null
        }
    }
    
    private fun isNewerVersion(latest: String, current: String): Boolean {
        val latestParts = latest.split(".").mapNotNull { it.toIntOrNull() }
        val currentParts = current.split(".").mapNotNull { it.toIntOrNull() }
        
        for (i in 0 until maxOf(latestParts.size, currentParts.size)) {
            val l = latestParts.getOrElse(i) { 0 }
            val c = currentParts.getOrElse(i) { 0 }
            if (l > c) return true
            if (l < c) return false
        }
        return false
    }
    
    private fun openGithubReleases() {
        val intent = Intent(Intent.ACTION_VIEW, Uri.parse(GITHUB_RELEASES))
        startActivity(intent)
    }
}

```

## File: app\src\main\java\com\oasth\widget\widget\BusRemoteViewsService.kt
```kt
package com.oasth.widget.widget

import android.content.Context
import android.content.Intent
import android.appwidget.AppWidgetManager
import android.util.Log
import android.view.View
import android.widget.RemoteViews
import android.widget.RemoteViewsService
import com.oasth.widget.R
import com.oasth.widget.data.BusArrival
import com.oasth.widget.data.OasthApi
import com.oasth.widget.data.SessionManager
import com.oasth.widget.data.StopRepository
import com.oasth.widget.data.WidgetConfigRepository
import kotlinx.coroutines.runBlocking

/**
 * Service that provides RemoteViews for the widget ListView
 */
class BusRemoteViewsService : RemoteViewsService() {
    override fun onGetViewFactory(intent: Intent): RemoteViewsFactory {
        return BusRemoteViewsFactory(applicationContext, intent)
    }
}

/**
 * Sealed class to represent different row types in the widget list
 */
sealed class WidgetItem {
    data class Header(val stopName: String) : WidgetItem()
    data class Row(val lineId: String, val times: String) : WidgetItem()
}

/**
 * Factory that creates RemoteViews for each bus arrival in the list
 */
class BusRemoteViewsFactory(
    private val context: Context,
    intent: Intent
) : RemoteViewsService.RemoteViewsFactory {
    
    companion object {
        private const val TAG = "BusRemoteViewsFactory"
    }
    
    private val appWidgetId = intent.getIntExtra(
        AppWidgetManager.EXTRA_APPWIDGET_ID,
        AppWidgetManager.INVALID_APPWIDGET_ID
    )
    
    // Using simple list of WidgetItem (Header or Row)
    private val items = mutableListOf<WidgetItem>()
    
    private val sessionManager = SessionManager(context)
    private val api = OasthApi(sessionManager)
    private val configRepo = WidgetConfigRepository(context)
    private val stopRepo = StopRepository(context)
    
    override fun onCreate() {
        Log.d(TAG, "onCreate for widget $appWidgetId")
    }
    
    override fun onDataSetChanged() {
        Log.d(TAG, "=== onDataSetChanged START ===")
        
        items.clear()
        
        val config = configRepo.getConfig(appWidgetId)
        if (config == null) {
            return
        }
        
        // 1. Parse Stops (Comma separated Street IDs)
        val streetIds = config.stopCode.split(",").map { it.trim() }.filter { it.isNotEmpty() }
        Log.d(TAG, "Config: rawCode='${config.stopCode}', parsedIds=$streetIds")
        
        // 2. Parse Filters (e.g. "1403:01N,05; 1024:10")
        // 2. Parse Filters (e.g. "1403:01N,05; 1024:10")
        val filterMap = com.oasth.widget.logic.FilterLogic.parseFilters(config.lineFilters)
        Log.d(TAG, "Filters: raw='${config.lineFilters}', map=$filterMap")
        
        // 3. Update Loop
        runBlocking {
            for (streetId in streetIds) {
                try {
                    Log.d(TAG, "Processing StreetID: '$streetId'")
                    
                    // Resolve ID and Name locally
                    val apiId = stopRepo.getApiId(streetId)
                    val stopName = stopRepo.getStopName(streetId) ?: "Stop $streetId"
                    
                    // Fetch Arrivals and deduplicate by Vehicle Code
                    val arrivals = api.getArrivals(apiId).distinctBy { 
                        if (it.vehicleCode.isNotBlank()) it.vehicleCode else it.hashCode() 
                    }
                    Log.d(TAG, "Fetched ${arrivals.size} arrivals for $streetId (API: $apiId)")
                    
                    // Filter
                    val validArrivals = com.oasth.widget.logic.FilterLogic.filterArrivals(streetId, arrivals, filterMap)
                    if (validArrivals.size != arrivals.size) {
                        Log.d(TAG, "Filtered $streetId: kept ${validArrivals.size} of ${arrivals.size}")
                    }
                    
                    if (validArrivals.isNotEmpty()) {
                        // Header with Stop Code
                        items.add(WidgetItem.Header("$stopName ($streetId)"))
                        
                        // Group by Line
                        val grouped = validArrivals.groupBy { it.displayLine }
                        
                        // Sort Line Groups by their NEAREST arrival time
                        val sortedLines = grouped.keys.sortedBy { line ->
                            grouped[line]?.minOfOrNull { it.estimatedMinutes } ?: Int.MAX_VALUE
                        }
                        
                        for (line in sortedLines) {
                            val lineArrivals = grouped[line] ?: emptyList()
                            val sortedArrivals = lineArrivals.sortedBy { it.estimatedMinutes }
                            
                            val timeString = sortedArrivals.joinToString(", ") { "${it.estimatedMinutes}'" }
                            items.add(WidgetItem.Row(line, timeString))
                        }
                    } else {
                        // User request: just "same line vertically".
                        // If no buses, let's show one header and "No buses" row so user knows it loaded
                         items.add(WidgetItem.Header("$stopName ($streetId)"))
                         items.add(WidgetItem.Row("", "No buses"))
                    }
                    
                } catch (e: Exception) {
                    Log.e(TAG, "Error fetching for $streetId: ${e.message}")
                    items.add(WidgetItem.Header("Stop $streetId"))
                    items.add(WidgetItem.Row("Err", "Load failed"))
                }
            }
        }
        
        Log.d(TAG, "=== onDataSetChanged END (${items.size} items) ===")
    }
    
    override fun onDestroy() {
        items.clear()
    }
    
    override fun getCount(): Int {
        return items.size
    }
    
    override fun getViewAt(position: Int): RemoteViews? {
        if (position >= items.size) return null
        
        return when (val item = items[position]) {
            is WidgetItem.Header -> {
                RemoteViews(context.packageName, R.layout.widget_header).apply {
                    setTextViewText(R.id.header_text, item.stopName)
                    setOnClickFillInIntent(R.id.header_root, Intent())
                }
            }
            is WidgetItem.Row -> {
                RemoteViews(context.packageName, R.layout.widget_item).apply {
                    if (item.lineId.isEmpty()) {
                        // "No buses" row, hide line number
                        setViewVisibility(R.id.item_line, View.GONE)
                    } else {
                        setViewVisibility(R.id.item_line, View.VISIBLE)
                        setTextViewText(R.id.item_line, item.lineId)
                    }
                    
                    setTextViewText(R.id.item_destination, item.times) // Showing times in destination field
                    setViewVisibility(R.id.item_time, View.GONE)       // Hide original time field
                    
                    setOnClickFillInIntent(R.id.item_root, Intent())
                }
            }
        }
    }
    
    override fun getLoadingView(): RemoteViews? = null
    
    override fun getViewTypeCount(): Int = 2
    
    override fun getItemId(position: Int): Long = position.toLong()
    
    override fun hasStableIds(): Boolean = false
}

```

## File: app\src\main\java\com\oasth\widget\widget\BusWidgetProvider.kt
```kt
package com.oasth.widget.widget

import android.app.PendingIntent
import android.appwidget.AppWidgetManager
import android.appwidget.AppWidgetProvider
import android.content.Context
import android.content.Intent
import android.net.Uri
import android.util.Log
import android.view.View
import android.widget.RemoteViews
import com.oasth.widget.R
import com.oasth.widget.data.StopRepository
import com.oasth.widget.data.WidgetConfigRepository

/**
 * Home screen widget provider with ListView for bus arrivals
 */
class BusWidgetProvider : AppWidgetProvider() {
    
    companion object {
        private const val TAG = "BusWidgetProvider"
        const val ACTION_REFRESH = "com.oasth.widget.ACTION_REFRESH"
        const val ACTION_TOGGLE_VISIBILITY = "com.oasth.widget.ACTION_TOGGLE_VISIBILITY"
        private const val PREFS_NAME = "widget_prefs"
        private const val PREF_PREFIX_KEY = "visibility_"
        
        fun updateAppWidget(
            context: Context,
            appWidgetManager: AppWidgetManager,
            appWidgetId: Int
        ) {
            Log.d(TAG, "updateAppWidget: $appWidgetId")
            
            val configRepo = WidgetConfigRepository(context)
            val config = configRepo.getConfig(appWidgetId)
            
            // Layout is widget_bus
            val views = RemoteViews(context.packageName, R.layout.widget_bus)
            
            if (config == null) {
                // Show "Tap to Configure"
                views.setTextViewText(R.id.widget_empty, context.getString(R.string.tap_to_configure))
                views.setViewVisibility(R.id.widget_list, View.GONE)
                views.setViewVisibility(R.id.empty_view, View.VISIBLE) // Use empty_view container
                
                val configIntent = Intent(context, WidgetConfigActivity::class.java).apply {
                    putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId)
                    flags = Intent.FLAG_ACTIVITY_NEW_TASK
                }
                val pendingIntent = PendingIntent.getActivity(
                    context, appWidgetId, configIntent,
                    PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_IMMUTABLE
                )
                views.setOnClickPendingIntent(R.id.widget_root, pendingIntent)
                
                appWidgetManager.updateAppWidget(appWidgetId, views)
                return
            }
            
            // Check Visibility State
            val prefs = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
            val isFocused = prefs.getBoolean(PREF_PREFIX_KEY + appWidgetId, false)
            
            // Set Background
            // Note: Since widget_root is a LinearLayout, setInt(..., "setBackgroundResource", ...) 
            // is needed because setImageViewResource is for ImageViews.
            // RemoteViews supports setInt for setBackgroundResource.
            views.setInt(R.id.widget_root, "setBackgroundResource", 
                if (isFocused) R.drawable.widget_background_focused else R.drawable.widget_background_transparent
            )
            
            // Set up List
            val intent = Intent(context, BusRemoteViewsService::class.java).apply {
                putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId)
                data = Uri.parse(toUri(Intent.URI_INTENT_SCHEME))
            }
            views.setRemoteAdapter(R.id.widget_list, intent)
            views.setEmptyView(R.id.widget_list, R.id.empty_view)
            
            // Toggle Intent (Refresh + Visibility)
            val toggleIntent = Intent(context, BusWidgetProvider::class.java).apply {
                action = ACTION_TOGGLE_VISIBILITY
                putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId)
                data = Uri.parse("widget://$appWidgetId") // Make unique
            }
            val togglePendingIntent = PendingIntent.getBroadcast(
                context, appWidgetId, toggleIntent,
                PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_MUTABLE // Mutable logic for fillIn? No, template is immutable usually ok?
                // Actually for setOnClickPendingIntent it can be immutable.
            )
            
            // Click on Root -> Toggle
            views.setOnClickPendingIntent(R.id.widget_root, togglePendingIntent)
            
            // Click on List Items -> Toggle (using Template)
            views.setPendingIntentTemplate(R.id.widget_list, togglePendingIntent)

            appWidgetManager.updateAppWidget(appWidgetId, views)
            appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.widget_list)
        }
    }
    
    override fun onUpdate(context: Context, appWidgetManager: AppWidgetManager, appWidgetIds: IntArray) {
        for (appWidgetId in appWidgetIds) {
            updateAppWidget(context, appWidgetManager, appWidgetId)
        }
    }
    
    override fun onReceive(context: Context, intent: Intent) {
        super.onReceive(context, intent)
        Log.d(TAG, "onReceive: ${intent.action}")
        
        if (intent.action == ACTION_TOGGLE_VISIBILITY) {
            val widgetId = intent.getIntExtra(
                AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID
            )
            if (widgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
                // Toggle State
                val prefs = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                val current = prefs.getBoolean(PREF_PREFIX_KEY + widgetId, false)
                prefs.edit().putBoolean(PREF_PREFIX_KEY + widgetId, !current).apply()
                
                // Update
                val manager = AppWidgetManager.getInstance(context)
                updateAppWidget(context, manager, widgetId)
            }
        }
        else if (intent.action == ACTION_REFRESH) {
             val widgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID)
             if (widgetId != AppWidgetManager.INVALID_APPWIDGET_ID) updateAppWidget(context, AppWidgetManager.getInstance(context), widgetId)
        }
    }
    
    override fun onDeleted(context: Context, appWidgetIds: IntArray) {
        val configRepo = WidgetConfigRepository(context)
        val prefs = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
        val editor = prefs.edit()
        appWidgetIds.forEach { 
            configRepo.deleteConfig(it)
            editor.remove(PREF_PREFIX_KEY + it)
        }
        editor.apply()
    }
}

```

## File: app\src\main\java\com\oasth\widget\widget\WidgetConfigActivity.kt
```kt
package com.oasth.widget.widget

import android.appwidget.AppWidgetManager
import android.content.Intent
import android.os.Bundle
import android.widget.Button
import android.widget.EditText
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import com.oasth.widget.R
import com.oasth.widget.data.StopRepository
import com.oasth.widget.data.WidgetConfig
import com.oasth.widget.data.WidgetConfigRepository
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch

/**
 * Configuration activity for setting up a widget
 * Supports Multiple Stops (comma-separated) and Line Filtering.
 */
class WidgetConfigActivity : AppCompatActivity() {
    
    private var widgetId = AppWidgetManager.INVALID_APPWIDGET_ID
    private lateinit var configRepo: WidgetConfigRepository
    private lateinit var stopRepo: StopRepository
    
    private lateinit var stopCodeInput: EditText
    private lateinit var stopNameInput: EditText
    private lateinit var lineFilterInput: EditText
    private lateinit var saveButton: Button
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_config)
        
        setResult(RESULT_CANCELED)
        
        configRepo = WidgetConfigRepository(this)
        stopRepo = StopRepository(this)
        
        widgetId = intent.getIntExtra(
            AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID
        )
        
        if (widgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
            finish()
            return
        }
        
        stopCodeInput = findViewById(R.id.stop_code_input)
        stopNameInput = findViewById(R.id.stop_name_input)
        lineFilterInput = findViewById(R.id.line_filter_input)
        saveButton = findViewById(R.id.save_button)
        
        val existingConfig = configRepo.getConfig(widgetId)
        if (existingConfig != null) {
            // Note: existingConfig.stopCode stores API IDs. 
            // Ideally we should reverse map to Street IDs for display, 
            // but for now we just show what's saved (API IDs or Street IDs if they differ).
            // Since we save API IDs, showing them might be confusing if user entered Street IDs.
            // But we don't have easy reverse mapping yet. 
            // Let's assume advanced users or just show simple text.
            stopCodeInput.setText(existingConfig.stopCode)
            stopNameInput.setText(existingConfig.stopName)
            lineFilterInput.setText(existingConfig.lineFilters)
        }
        
        saveButton.setOnClickListener {
            saveConfiguration()
        }
    }
    
    private fun saveConfiguration() {
        val inputStopCodes = stopCodeInput.text.toString().trim()
        val inputStopName = stopNameInput.text.toString().trim()
        val inputFilters = lineFilterInput.text.toString().trim()
        
        if (inputStopCodes.isEmpty()) {
            Toast.makeText(this, R.string.enter_stop_code, Toast.LENGTH_SHORT).show()
            return
        }
        
        saveButton.isEnabled = false
        saveButton.text = getString(R.string.save) // "Save"
        
        CoroutineScope(Dispatchers.IO).launch {
            // 1. Parse multiple stops to get names
            val streetIds = inputStopCodes.split(",").map { it.trim() }.filter { it.isNotEmpty() }
            val autoNames = mutableListOf<String>()
            
            for (streetId in streetIds) {
                // Try to get name locally
                val name = stopRepo.getStopName(streetId) ?: "Stop $streetId"
                autoNames.add(name)
            }
            
            val finalName = if (inputStopName.isNotEmpty()) inputStopName else autoNames.joinToString(", ")
            
            // 2. Save Config (Store Street IDs, resolve at runtime)
            val config = WidgetConfig(
                widgetId = widgetId,
                stopCode = inputStopCodes, // Save as comma-separated Street IDs
                stopName = finalName,
                lineFilters = inputFilters
            )
            configRepo.saveConfig(config)
            
            // 3. Update Widget
            val intent = Intent(this@WidgetConfigActivity, BusWidgetProvider::class.java).apply {
                action = AppWidgetManager.ACTION_APPWIDGET_UPDATE
                putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, intArrayOf(widgetId))
            }
            sendBroadcast(intent)
            
            // 4. Finish
            CoroutineScope(Dispatchers.Main).launch {
                val resultIntent = Intent().apply {
                    putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId)
                }
                setResult(RESULT_OK, resultIntent)
                finish()
            }
        }
    }
}

```

## File: app\src\main\java\com\oasth\widget\OasthApp.kt
```kt
package com.oasth.widget

import android.app.Application

class OasthApp : Application() {
    
    override fun onCreate() {
        super.onCreate()
        instance = this
    }
    
    companion object {
        lateinit var instance: OasthApp
            private set
    }
}

```

## File: app\src\main\res\drawable\ic_launcher_foreground.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <!-- Bus icon -->
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M54,24c-12,0 -22,2 -22,14v32c0,4.4 3.6,8 8,8h4v6c0,2.2 1.8,4 4,4s4,-1.8 4,-4v-6h12v6c0,2.2 1.8,4 4,4s4,-1.8 4,-4v-6h4c4.4,0 8,-3.6 8,-8V38c0,-12 -10,-14 -22,-14zM44,66c-2.2,0 -4,-1.8 -4,-4s1.8,-4 4,-4 4,1.8 4,4 -1.8,4 -4,4zM64,66c-2.2,0 -4,-1.8 -4,-4s1.8,-4 4,-4 4,1.8 4,4 -1.8,4 -4,4zM72,52H36V38h36v14z"/>
</vector>

```

## File: app\src\main\res\drawable\input_background.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/surface" />
    <corners android:radius="8dp" />
    <stroke
        android:width="1dp"
        android:color="#40FFFFFF" />
</shape>

```

## File: app\src\main\res\drawable\widget_background.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <!-- Black background like real OASTH LED display -->
    <solid android:color="#000000"/>
    <corners android:radius="8dp"/>
    <stroke
        android:width="2dp"
        android:color="#1A1A1A"/>
</shape>

```

## File: app\src\main\res\drawable\widget_background_focused.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    
    <!-- Darker background for readability (Focused Mode) -->
    <solid android:color="#CC121212" />
    
    <corners android:radius="16dp" />
    
    <!-- Subtle border glow -->
    <stroke 
        android:width="1dp" 
        android:color="#44FFD700" />
    
</shape>

```

## File: app\src\main\res\drawable\widget_background_transparent.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    
    <!-- Very transparent black - blends with wallpaper (Phantom Mode) -->
    <solid android:color="#20000000" />
    
    <corners android:radius="16dp" />
    
</shape>

```

## File: app\src\main\res\drawable\widget_preview.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/widget_background" />
    <corners android:radius="16dp" />
</shape>

```

## File: app\src\main\res\layout\activity_config.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="24dp"
    android:background="@color/background">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/configure_widget"
        android:textSize="24sp"
        android:textStyle="bold"
        android:textColor="@color/text_primary"
        android:layout_marginBottom="32dp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/stop_code_label"
        android:textSize="14sp"
        android:textColor="@color/text_secondary"
        android:layout_marginBottom="8dp" />

    <EditText
        android:id="@+id/stop_code_input"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/stop_code_hint_multi"
        android:inputType="text"
        android:padding="16dp"
        android:textSize="16sp"
        android:background="@drawable/input_background"
        android:layout_marginBottom="24dp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/stop_name_label"
        android:textSize="14sp"
        android:textColor="@color/text_secondary"
        android:layout_marginBottom="8dp" />

    <EditText
        android:id="@+id/stop_name_input"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/stop_name_hint"
        android:inputType="text"
        android:padding="16dp"
        android:textSize="16sp"
        android:background="@drawable/input_background"
        android:layout_marginBottom="24dp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/line_filter_label"
        android:textSize="14sp"
        android:textColor="@color/text_secondary"
        android:layout_marginBottom="8dp" />

    <EditText
        android:id="@+id/line_filter_input"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/line_filter_hint"
        android:inputType="text"
        android:padding="16dp"
        android:textSize="16sp"
        android:background="@drawable/input_background"
        android:layout_marginBottom="32dp" />

    <Button
        android:id="@+id/save_button"
        android:layout_width="match_parent"
        android:layout_height="56dp"
        android:text="@string/save"
        android:textSize="16sp"
        android:textStyle="bold" />

</LinearLayout>

```

## File: app\src\main\res\layout\activity_main.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background"
    android:fillViewport="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="24dp">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:textSize="28sp"
            android:textStyle="bold"
            android:textColor="@color/text_primary"
            android:layout_marginBottom="4dp" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_description"
            android:textSize="14sp"
            android:textColor="@color/text_secondary"
            android:layout_marginBottom="32dp" />

        <!-- Session Status -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/status_title"
            android:textSize="16sp"
            android:textStyle="bold"
            android:textColor="@color/text_primary"
            android:layout_marginBottom="8dp" />

        <TextView
            android:id="@+id/status_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/loading"
            android:textSize="14sp"
            android:textColor="@color/text_secondary"
            android:layout_marginBottom="24dp" />

        <!-- Widgets -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/widgets_title"
            android:textSize="16sp"
            android:textStyle="bold"
            android:textColor="@color/text_primary"
            android:layout_marginBottom="8dp" />

        <TextView
            android:id="@+id/widgets_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="14sp"
            android:textColor="@color/text_secondary"
            android:layout_marginBottom="24dp" />

        <!-- Version & Updates -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/version_title"
            android:textSize="16sp"
            android:textStyle="bold"
            android:textColor="@color/text_primary"
            android:layout_marginBottom="8dp" />

        <TextView
            android:id="@+id/update_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="14sp"
            android:textColor="@color/text_secondary"
            android:layout_marginBottom="8dp" />

        <Button
            android:id="@+id/update_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/download_update"
            android:visibility="gone"
            android:layout_marginBottom="24dp" />

        <!-- How to Add -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/how_to_add"
            android:textSize="12sp"
            android:textColor="@color/text_hint"
            android:gravity="center"
            android:layout_marginBottom="32dp" />

        <!-- Credits -->
        <TextView
            android:id="@+id/credits_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/credits"
            android:textSize="12sp"
            android:textColor="@color/text_hint"
            android:gravity="center" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/credits_subtitle"
            android:textSize="11sp"
            android:textColor="@color/text_hint"
            android:gravity="center"
            android:layout_marginTop="4dp" />

    </LinearLayout>
</ScrollView>

```

## File: app\src\main\res\layout\widget_bus.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/widget_background_transparent"
    android:padding="8dp">

    <!-- Loading / Empty View -->
    <FrameLayout
        android:id="@+id/empty_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone">
        <TextView
            android:id="@+id/widget_empty"
            android:text="Loading..."
            android:textColor="#ffffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
    </FrameLayout>

    <!-- Bus List -->
    <ListView
        android:id="@+id/widget_list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:cacheColorHint="@android:color/transparent"
        android:listSelector="@android:color/transparent" />
    
    <!-- Bottom accent line -->
    
</LinearLayout>

```

## File: app\src\main\res\layout\widget_header.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="2dp"
    android:paddingBottom="2dp">

    <!-- Header Box -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#20000000"
        android:paddingVertical="2dp"
        android:paddingHorizontal="4dp"
        android:orientation="horizontal"
        android:gravity="center_vertical">

        <ImageView
            android:layout_width="4dp"
            android:layout_height="16dp"
            android:src="@android:color/white"
            android:tint="#FFD700"
            android:layout_marginEnd="4dp"/>

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="STOP NAME"
            android:textColor="#FFFFFF"
            android:textStyle="bold"
            android:textSize="13sp"
            android:textAllCaps="true"
            android:letterSpacing="0.05"
            android:fontFamily="sans-serif-condensed" />
            
    </LinearLayout>

</LinearLayout>

```

## File: app\src\main\res\layout\widget_item.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/item_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical"
    android:paddingHorizontal="16dp"
    android:paddingVertical="12dp">

    <!-- Line Number Box -->
    <TextView
        android:id="@+id/item_line"
        android:layout_width="20dp"
        android:layout_height="wrap_content"
        android:text="01N"
        android:textColor="#FFD700"
        android:textSize="14sp"
        android:textStyle="bold"
        android:gravity="center_vertical"
        android:fontFamily="sans-serif-condensed" />
        
    <ImageView
        android:layout_width="1dp"
        android:layout_height="16dp"
        android:src="@android:color/white"
        android:tint="#0a561cff"
        android:layout_marginHorizontal="4dp"/>

    <!-- Times -->
    <TextView
        android:id="@+id/item_destination"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="3', 12', 45'"
        android:textColor="#EEEEEE"
        android:textSize="14sp"
        android:fontFamily="sans-serif"
        android:ellipsize="end"
        android:maxLines="1" />

    <!-- Legacy time field (hidden) -->
    <TextView
        android:id="@+id/item_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone" />

</LinearLayout>

```

## File: app\src\main\res\layout\widget_layout.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="14dp"
    android:background="@drawable/widget_background">

    <TextView
        android:id="@+id/stop_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        android:textStyle="bold"
        android:textColor="#FFFFFF"
        android:maxLines="1"
        android:ellipsize="end"
        android:shadowColor="#40000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2" />

    <TextView
        android:id="@+id/arrivals_text"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_marginTop="8dp"
        android:textSize="14sp"
        android:textColor="#F0F0F0"
        android:lineSpacingExtra="3dp"
        android:gravity="top" />

    <TextView
        android:id="@+id/refresh_hint"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:textSize="10sp"
        android:textColor="#80FFFFFF"
        android:gravity="end" />

</LinearLayout>

```

## File: app\src\main\res\mipmap-anydpi-v26\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/primary"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>

```

## File: app\src\main\res\mipmap-anydpi-v26\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@color/primary"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>

```

## File: app\src\main\res\mipmap-hdpi\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-hdpi\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-mdpi\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-mdpi\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xhdpi\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xhdpi\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xxhdpi\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xxhdpi\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xxxhdpi\ic_launcher.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\mipmap-xxxhdpi\ic_launcher_round.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/primary" />
    <size
        android:width="48dp"
        android:height="48dp" />
</shape>

```

## File: app\src\main\res\values\colors.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="primary">#1976D2</color>
    <color name="primary_dark">#1565C0</color>
    <color name="accent">#03A9F4</color>
    
    <color name="background">#121212</color>
    <color name="surface">#1E1E1E</color>
    
    <color name="text_primary">#FFFFFF</color>
    <color name="text_secondary">#B0B0B0</color>
    <color name="text_hint">#707070</color>
    
    <color name="widget_background">#CC1E1E1E</color>
</resources>

```

## File: app\src\main\res\values\strings.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">OASTH Live</string>
    <string name="widget_name">Bus Arrivals</string>
    <string name="widget_description">Shows real-time bus arrivals for your stop</string>
    
    <!-- Widget -->
    <string name="tap_to_configure">Tap to configure</string>
    <string name="loading">Loading</string>
    <string name="no_buses">No buses scheduled</string>
    <string name="no_buses_night"> Night - first bus ~5:30 AM</string>
    <string name="no_buses_early"> Too early - buses start soon</string>
    <string name="error_loading"> Tap to refresh</string>
    <string name="tap_to_refresh"> Tap to refresh</string>
    
    <!-- Config Activity -->
    <string name="configure_widget">Configure Widget</string>
    <string name="stop_code_label">Stop Code *</string>
    <string name="stop_code_hint">e.g. 1029</string>
    <string name="stop_name_label">Stop Name (auto-detected)</string>
    <string name="stop_name_hint">Leave empty to auto-fetch</string>
    <string name="save">Save</string>
    <string name="enter_stop_code">Please enter a stop code</string>
    <string name="fetching_stop_name">Fetching stop name</string>
    <string name="line_filter_label">Line Filter (Whitelist)</string>
    <string name="line_filter_hint">e.g. 1403:01N,05; 1024:10</string>
    <string name="stop_code_hint_multi">e.g. 1403, 1024</string>
    
    <!-- Main Activity -->
    <string name="app_description">Real-time bus arrivals for Thessaloniki</string>
    <string name="status_title">Session Status</string>
    <string name="checking_session">Checking session</string>
    <string name="session_active"> Session active</string>
    <string name="session_error">Error: %s</string>
    <string name="widgets_title">Your Widgets</string>
    <string name="no_widgets_configured">No widgets configured yet.\nLong-press your home screen to add one.</string>
    <string name="configured_widgets">%d widget(s) configured:</string>
    <string name="how_to_add">Long-press home screen  Widgets  OASTH Live</string>
    
    <!-- Version & Updates -->
    <string name="version_title">App Version</string>
    <string name="version_current">v%s</string>
    <string name="version_up_to_date"> Up to date</string>
    <string name="version_update_available"> Update available: %s</string>
    <string name="version_checking">Checking for updates</string>
    <string name="download_update">Download Update</string>
    
    <!-- Credits -->
    <string name="credits">Made with  by a fellow duo enthusiast</string>
    <string name="credits_subtitle">Open source on GitHub</string>
    
    <!-- Widget Headers (LED style) -->
    <string name="header_line">LINE</string>
    <string name="header_destination">DESTINATION</string>
    <string name="header_arrival">ARR</string>
</resources>

```

## File: app\src\main\res\values\themes.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.OasthWidget" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <item name="colorPrimary">@color/primary</item>
        <item name="colorPrimaryDark">@color/primary_dark</item>
        <item name="colorAccent">@color/accent</item>
        <item name="android:windowBackground">@color/background</item>
        <item name="android:statusBarColor">@color/primary_dark</item>
    </style>
</resources>

```

## File: app\src\main\res\values-el\strings.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name"> Live</string>
    <string name="widget_name"> </string>
    <string name="widget_description">    </string>
    
    <!-- Widget -->
    <string name="tap_to_configure">  </string>
    <string name="loading"></string>
    <string name="no_buses">  </string>
    <string name="no_buses_night">  -  ~5:30 </string>
    <string name="no_buses_early">   - </string>
    <string name="error_loading">   </string>
    <string name="tap_to_refresh">   </string>
    
    <!-- Config Activity -->
    <string name="configure_widget"> Widget</string>
    <string name="stop_code_label">  *</string>
    <string name="stop_code_hint">.. 1029</string>
    <string name="stop_name_label">  ()</string>
    <string name="stop_name_hint">   </string>
    <string name="save"></string>
    <string name="enter_stop_code">  </string>
    <string name="fetching_stop_name"> </string>
    
    <!-- Main Activity -->
    <string name="app_description">     </string>
    <string name="status_title"> </string>
    <string name="checking_session"> </string>
    <string name="session_active">  </string>
    <string name="session_error">: %s</string>
    <string name="widgets_title"> Widget </string>
    <string name="no_widgets_configured">  widgets.\n    .</string>
    <string name="configured_widgets">%d widget :</string>
    <string name="how_to_add">   Widgets   Live</string>
    
    <!-- Version & Updates -->
    <string name="version_title"> </string>
    <string name="version_current">v%s</string>
    <string name="version_up_to_date"> </string>
    <string name="version_update_available">  : %s</string>
    <string name="version_checking"> </string>
    <string name="download_update"> </string>
    
    <!-- Credits -->
    <string name="credits">     duo enthusiast</string>
    <string name="credits_subtitle">   GitHub</string>
    
    <!-- Widget Headers (LED style) -->
    <string name="header_line"></string>
    <string name="header_destination"></string>
    <string name="header_arrival"></string>
</resources>

```

## File: app\src\main\res\xml\widget_info.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="110dp"
    android:minHeight="40dp"
    android:minResizeWidth="80dp"
    android:minResizeHeight="40dp"
    android:maxResizeWidth="500dp"
    android:maxResizeHeight="500dp"
    android:targetCellWidth="3"
    android:targetCellHeight="2"
    android:updatePeriodMillis="1800000"
    android:initialLayout="@layout/widget_bus"
    android:configure="com.oasth.widget.widget.WidgetConfigActivity"
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen"
    android:previewImage="@drawable/widget_preview"
    android:description="@string/widget_description" />

```

## File: app\src\main\AndroidManifest.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:name=".OasthApp"
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.OasthWidget"
        android:usesCleartextTraffic="false">
        
        <!-- Main Activity -->
        <activity
            android:name=".ui.MainActivity"
            android:exported="true"
            android:label="@string/app_name"
            android:theme="@style/Theme.OasthWidget">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Widget Configuration Activity -->
        <activity
            android:name=".widget.WidgetConfigActivity"
            android:exported="true"
            android:label="@string/configure_widget"
            android:theme="@style/Theme.OasthWidget">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
            </intent-filter>
        </activity>

        <!-- Widget Provider -->
        <receiver
            android:name=".widget.BusWidgetProvider"
            android:exported="true"
            android:label="@string/widget_name">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </receiver>

        <!-- Widget RemoteViews Service for ListView -->
        <service
            android:name=".widget.BusRemoteViewsService"
            android:exported="false"
            android:permission="android.permission.BIND_REMOTEVIEWS" />

    </application>

</manifest>

```

## File: app\src\test\java\com\oasth\widget\ApiParsingTest.kt
```kt
package com.oasth.widget

import org.junit.Assert.*
import org.junit.Test

/**
 * Unit tests for API response parsing
 */
class ApiParsingTest {
    
    @Test
    fun `parseArrivals extracts line ID and time from JSON`() {
        val json = """
            [
                {"bline_id":"01K","bline_descr":"KAMARA","route_code":"01K-1","btime2":5},
                {"bline_id":"02","bline_descr":"TOUMBA","route_code":"02-1","btime2":12}
            ]
        """.trimIndent()
        
        val pattern = """"bline_id"\s*:\s*"([^"]+)"[^}]*"btime2"\s*:\s*(\d+)""".toRegex()
        val matches = pattern.findAll(json).toList()
        
        assertEquals("Should find 2 arrivals", 2, matches.size)
        assertEquals("01K", matches[0].groupValues[1])
        assertEquals("5", matches[0].groupValues[2])
        assertEquals("02", matches[1].groupValues[1])
        assertEquals("12", matches[1].groupValues[2])
    }
    
    @Test
    fun `parseArrivals handles empty response`() {
        val json = "[]"
        
        val pattern = """"bline_id"\s*:\s*"([^"]+)"[^}]*"btime2"\s*:\s*(\d+)""".toRegex()
        val matches = pattern.findAll(json).toList()
        
        assertEquals("Empty JSON should return no matches", 0, matches.size)
    }
    
    @Test
    fun `parseArrivals handles malformed JSON gracefully`() {
        val json = "not valid json"
        
        val pattern = """"bline_id"\s*:\s*"([^"]+)"[^}]*"btime2"\s*:\s*(\d+)""".toRegex()
        val matches = pattern.findAll(json).toList()
        
        assertEquals("Malformed JSON should return no matches", 0, matches.size)
    }
    
    @Test
    fun `parseStopName extracts stop description`() {
        val json = """{"stopDescr":"PARKO SMYRNIS","stopId":"1029"}"""
        
        val pattern = """"stopDescr"\s*:\s*"([^"]+)"""".toRegex()
        val match = pattern.find(json)
        
        assertNotNull("Should find stop description", match)
        assertEquals("PARKO SMYRNIS", match?.groupValues?.get(1))
    }
    
    @Test
    fun `parseVersionTag extracts version from GitHub API`() {
        val json = """{"tag_name":"v2.1.0","name":"Release 2.1.0"}"""
        
        val pattern = """"tag_name"\s*:\s*"v?([^"]+)"""".toRegex()
        val match = pattern.find(json)
        
        assertNotNull("Should find version tag", match)
        assertEquals("2.1.0", match?.groupValues?.get(1))
    }
}

```

## File: app\src\test\java\com\oasth\widget\ModelsTest.kt
```kt
package com.oasth.widget

import com.oasth.widget.data.BusArrival
import com.oasth.widget.data.SessionData
import com.oasth.widget.data.WidgetConfig
import org.junit.Assert.*
import org.junit.Test

/**
 * Unit tests for data models
 */
class ModelsTest {
    
    @Test
    fun `BusArrival should store correct values`() {
        val arrival = BusArrival(
            lineId = "01K",
            lineDescr = "KAMARA",
            routeCode = "01K-1",
            vehicleCode = "1234",
            rawTime = "5"
        )
        
        assertEquals("01K", arrival.lineId)
        assertEquals("KAMARA", arrival.lineDescr)
        assertEquals("01K-1", arrival.routeCode)
        assertEquals("1234", arrival.vehicleCode)
        assertEquals(5, arrival.estimatedMinutes)
        assertEquals("01K", arrival.displayLine)
    }
    
    @Test
    fun `BusArrival displayLine prefers lineId over routeCode`() {
        val withLineId = BusArrival(lineId = "01K", routeCode = "01K-1")
        assertEquals("01K", withLineId.displayLine)
        
        val onlyRouteCode = BusArrival(routeCode = "39")
        assertEquals("39", onlyRouteCode.displayLine)
    }
    
    @Test
    fun `SessionData isValid returns true for fresh session`() {
        val session = SessionData(
            phpSessionId = "test123",
            token = "token456",
            createdAt = System.currentTimeMillis()
        )
        
        assertTrue("Fresh session should be valid", session.isValid())
    }
    
    @Test
    fun `SessionData isValid returns false for expired session`() {
        val twoHoursAgo = System.currentTimeMillis() - (2 * 60 * 60 * 1000L)
        val session = SessionData(
            phpSessionId = "test123",
            token = "token456",
            createdAt = twoHoursAgo
        )
        
        assertFalse("2-hour old session should be expired", session.isValid())
    }
    
    @Test
    fun `WidgetConfig stores widget configuration`() {
        val config = WidgetConfig(
            widgetId = 42,
            stopCode = "1029",
            stopName = "ESPEROS"
        )
        
        assertEquals(42, config.widgetId)
        assertEquals("1029", config.stopCode)
        assertEquals("ESPEROS", config.stopName)
    }
    
    @Test
    fun `BusArrival default values are correct`() {
        val arrival = BusArrival()
        
        assertEquals("", arrival.lineId)
        assertEquals("", arrival.lineDescr)
        assertEquals("", arrival.routeCode)
        assertEquals("", arrival.vehicleCode)
        assertEquals(0, arrival.estimatedMinutes)
        assertEquals("", arrival.displayLine)
    }
}

```

## File: app\src\test\java\com\oasth\widget\VersionCheckTest.kt
```kt
package com.oasth.widget

import org.junit.Assert.*
import org.junit.Test

/**
 * Unit tests for version comparison logic
 */
class VersionCheckTest {
    
    private fun isNewerVersion(latest: String, current: String): Boolean {
        val latestParts = latest.split(".").mapNotNull { it.toIntOrNull() }
        val currentParts = current.split(".").mapNotNull { it.toIntOrNull() }
        
        for (i in 0 until maxOf(latestParts.size, currentParts.size)) {
            val l = latestParts.getOrElse(i) { 0 }
            val c = currentParts.getOrElse(i) { 0 }
            if (l > c) return true
            if (l < c) return false
        }
        return false
    }
    
    @Test
    fun `newer major version is detected`() {
        assertTrue(isNewerVersion("3.0.0", "2.1.0"))
    }
    
    @Test
    fun `newer minor version is detected`() {
        assertTrue(isNewerVersion("2.2.0", "2.1.0"))
    }
    
    @Test
    fun `newer patch version is detected`() {
        assertTrue(isNewerVersion("2.1.1", "2.1.0"))
    }
    
    @Test
    fun `same version is not newer`() {
        assertFalse(isNewerVersion("2.1.0", "2.1.0"))
    }
    
    @Test
    fun `older version is not newer`() {
        assertFalse(isNewerVersion("2.0.0", "2.1.0"))
    }
    
    @Test
    fun `handles different version lengths`() {
        assertTrue(isNewerVersion("2.1.0.1", "2.1.0"))
        assertFalse(isNewerVersion("2.1", "2.1.0"))
    }
}

```

## File: app\build.gradle.kts
```kotlin
plugins {
    id("com.android.application")
    id("org.jetbrains.kotlin.android")
}

android {
    namespace = "com.oasth.widget"
    compileSdk = 34

    defaultConfig {
        applicationId = "com.oasth.widget"
        minSdk = 26
        targetSdk = 34
        versionCode = 1
        versionName = "1.0.0"
    }

    buildTypes {
        release {
            isMinifyEnabled = false
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
    }
    
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }
    
    kotlinOptions {
        jvmTarget = "17"
    }
}

dependencies {
    implementation("androidx.core:core-ktx:1.12.0")
    implementation("androidx.appcompat:appcompat:1.6.1")
    implementation("com.google.android.material:material:1.11.0")
    
    // HTTP client
    implementation("com.squareup.okhttp3:okhttp:4.12.0")
    
    // JSON parsing
    implementation("com.google.code.gson:gson:2.10.1")
    
    // Background work
    implementation("androidx.work:work-runtime-ktx:2.9.0")
    
    // WebView for session management
    implementation("androidx.webkit:webkit:1.9.0")
    
    // Unit testing
    testImplementation("junit:junit:4.13.2")
}

```

## File: app\proguard-rules.pro
```properties
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in /sdk/tools/proguard/proguard-android.txt

# Keep OkHttp
-keepattributes Signature
-keepattributes *Annotation*
-keep class okhttp3.** { *; }
-keep interface okhttp3.** { *; }
-dontwarn okhttp3.**
-dontwarn okio.**

# Keep Gson
-keep class com.oasth.widget.data.** { *; }
-keepclassmembers class com.oasth.widget.data.** { *; }

```

## File: gradle\wrapper\gradle-wrapper.properties
```properties
#Mon Dec 08 00:36:44 EET 2025
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-9.0-milestone-1-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists

```

## File: build.gradle.kts
```kotlin
// Top-level build file where you can add configuration options common to all sub-projects/modules.
plugins {
    id("com.android.application") version "8.2.0" apply false
    id("org.jetbrains.kotlin.android") version "1.9.21" apply false
}

```

## File: gradle.properties
```properties
# Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.

# AndroidX migration
android.useAndroidX=true
android.enableJetifier=true

# Kotlin code style
kotlin.code.style=official

# Increase memory for Gradle
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8

# Enable build cache
org.gradle.caching=true

```

## File: local.properties
```properties
## This file must *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.
#
# Location of the SDK. This is only used by Gradle.
# For customization when using a Version Control System, please read the
# header note.
#Sun Dec 07 21:11:16 EET 2025
sdk.dir=C\:\\Users\\panos\\AppData\\Local\\Android\\Sdk

```

## File: settings.gradle.kts
```kotlin
pluginManagement {
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = "OasthWidget"
include(":app")

```

